<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Padel Scheduler — 多场地 (≥5 玩家)</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  :root { 
  --card: #1f2937;   
  --muted: #9ca3af;  
}
body { 
  background: #0f172a;  
  color:#f1f5f9;        
}
.card { 
  background: var(--card); 
  border-radius: 1rem; 
  box-shadow: 0 1px 6px rgba(0,0,0,0.6); 
  border: 1px solid #374151; 
}
.btn { 
  border-radius: .6rem; 
  padding: .5rem .9rem; 
  font-weight: 600; 
  border: 1px solid #374151; 
  background: #111827; 
  color:#f9fafb;
  cursor:pointer; 
}
.btn-primary { 
  background: linear-gradient(180deg,#4f46e5,#4338ca); 
  color:#fff; 
  border:none; 
}
.input, .select, textarea { 
  border: 1px solid #374151; 
  border-radius: .6rem; 
  padding: .55rem .7rem; 
  width: 100%; 
  box-sizing:border-box; 
  background:#111827; 
  color:#f9fafb; 
}
.table { 
  width:100%; 
  border-collapse:collapse; 
  font-size: .95rem; 
}
th, td { 
  text-align:left; 
  padding:.5rem .6rem; 
  border-bottom:1px solid #374151; 
  vertical-align:top; 
}
thead th { 
  text-transform:uppercase; 
  font-size:.78rem; 
  color:#9ca3af; 
  background:#1e293b; 
}
.badge { 
  display:inline-flex; 
  align-items:center; 
  padding:.18rem .5rem; 
  border-radius:999px; 
  font-weight:600; 
  font-size:.78rem;
}
.badge-win { background:#166534; color:#dcfce7; }
.badge-lose { background:#075985; color:#e0f2fe; }
.badge-pending { background:#374151; color:#f1f5f9; }
</style>
</head>
<body>
<div class="max-w-6xl mx-auto p-4 space-y-6">

  <!-- Header -->
  <header class="flex items-center justify-between">
    <div>
      <h1 id="title" class="text-2xl font-bold">Padel Scheduler 调度器</h1>
      <p id="subtitle" class="text-sm text-slate-500">支持 ≥5 玩家 · 可选 1 或 2 个场地 · 每轮平衡双打</p>
    </div>
    <div class="flex gap-2">
      <button id="btnLang" class="btn">🌐 English</button>
      <button id="btnExportCSV" class="btn">导出总表 / Export CSV</button>
      <button id="btnReset" class="btn">重置 / Reset</button>
    </div>
  </header>

  <!-- Settings -->
  <section class="card p-4">
    <div class="grid md:grid-cols-4 gap-4">
      <div class="md:col-span-2">
        <label id="lblPlayers" class="block text-sm font-medium mb-1">玩家列表 / Players (用逗号分隔)</label>
        <textarea id="playersInput" rows="3" class="input" placeholder="Alice, Bob, Carol, Dave, Eve, ..."></textarea>
        <p id="hintPlayers" class="text-xs text-slate-500 mt-1">至少 5 名玩家，允许奇数人数。</p>
      </div>

      <div>
        <label id="lblMatches" class="block text-sm font-medium mb-1">每位玩家的场次 / Matches per player</label>
        <input id="matchesPerPlayer" type="number" min="1" max="8" value="4" class="input">
      </div>

      <div>
        <label id="lblCourtMode" class="block text-sm font-medium mb-1">场地模式 / Court Mode</label>
        <select id="courtMode" class="input">
          <option value="1">1 场地（全部在 A 场地 / All in Court A）</option>
          <option value="2" selected>2 场地（分配 A & B / Split A & B）</option>
        </select>
      </div>

      <div>
        <label id="lblStrategy" class="block text-sm font-medium mb-1">下一轮策略 / Next-round strategy</label>
        <select id="strategy" class="input">
          <option value="winnersTogether">胜者 → A 场，负者 → B 场 / Winners → A, Losers → B</option>
          <option value="winnersDistributed">均匀分配胜者 / Distribute winners evenly</option>
        </select>
      </div>

      <div class="md:col-span-4">
        <button id="btnGenerateR1" class="btn btn-primary mt-2">生成第 1 轮 / Generate Round 1</button>
      </div>
    </div>
  </section>

  <!-- Rounds -->
  <section class="grid md:grid-cols-2 gap-6">
    <div class="card p-4">
      <div class="flex items-center justify-between mb-3">
        <h2 class="font-semibold" id="roundALabel">第 <span id="labelRoundA">1</span> 轮 — A 场 / Round</h2>
        <button id="btnBuildNextRound" class="btn btn-primary">生成下一轮 / Build Next Round</button>
      </div>
      <div class="overflow-x-auto">
        <table class="table" id="tblA">
          <thead><tr><th>#</th><th>队伍 1 / Team 1</th><th>队伍 2 / Team 2</th><th>队伍1得分 / T1 Games</th><th>队伍2得分 / T2 Games</th><th>胜者 / Winner</th></tr></thead>
          <tbody></tbody>
        </table>
      </div>
    </div>

    <div class="card p-4" id="courtBCard">
      <h2 class="font-semibold mb-3" id="roundBLabel">第 <span id="labelRoundB">1</span> 轮 — B 场 / Round</h2>
      <div class="overflow-x-auto">
        <table class="table" id="tblB">
          <thead><tr><th>#</th><th>队伍 1 / Team 1</th><th>队伍 2 / Team 2</th><th>队伍1得分 / T1 Games</th><th>队伍2得分 / T2 Games</th><th>胜者 / Winner</th></tr></thead>
          <tbody></tbody>
        </table>
      </div>
    </div>
  </section>

  <!-- Leaderboards -->
  <section class="card p-4">
    <div class="flex items-center justify-between mb-3">
      <h2 class="font-semibold" id="lbTitle">排行榜 / Leaderboards</h2>
      <div class="flex gap-2">
        <button id="btnSubmit" class="btn">提交成绩 / Submit</button>
        <button id="btnResubmit" class="btn">重新提交 / Resubmit</button>
        <button id="btnRecalcLB" class="btn">重新计算 / Recalculate</button>
      </div>
    </div>
    <div id="lbPanels" class="space-y-6"></div>
  </section>

</div>

<!-- 原来的脚本逻辑保持不变 -->
<script>
// 保留你原本的所有调度逻辑，这里只加一个语言切换
const i18n = {
  zh: {
    title: "Padel Scheduler 调度器",
    subtitle: "支持 ≥5 玩家 · 可选 1 或 2 个场地 · 每轮平衡双打",
    btnLang: "🌐 English"
  },
  en: {
    title: "Padel Scheduler",
    subtitle: "Supports ≥5 players · choose 1 or 2 courts · per-round balanced doubles",
    btnLang: "🌐 中文"
  }
};
let currentLang = "zh";
document.getElementById("btnLang").addEventListener("click", () => {
  currentLang = currentLang === "zh" ? "en" : "zh";
  const t = i18n[currentLang];
  document.getElementById("title").textContent = t.title;
  document.getElementById("subtitle").textContent = t.subtitle;
  document.getElementById("btnLang").textContent = t.btnLang;
});

// === 下面直接保留你原来的脚本逻辑（省略，跟之前完全一致） ===
// ...
</script>
</body>
</html>
